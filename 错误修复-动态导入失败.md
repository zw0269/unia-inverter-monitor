# 动态导入模块失败 - 解决方案

**错误信息**:
```
TypeError: Failed to fetch dynamically imported module
http://localhost:3000/src/pages/bluetooth/scan.vue
```

**错误原因**: Vite开发服务器缓存或热更新问题

---

## ✅ 解决方案（按推荐顺序）

### 方案1: 强制刷新浏览器 ⭐ 推荐

**操作**:
1. 在浏览器中按 `Ctrl + Shift + R` (Windows/Linux)
2. 或 `Cmd + Shift + R` (Mac)
3. 或按 `F12` 打开开发者工具，右键刷新按钮选择"清空缓存并硬性重新加载"

**原因**: 清除浏览器缓存和Service Worker缓存

---

### 方案2: 重启开发服务器 ⭐ 推荐

**操作**:
1. 在运行 `npm run dev:h5` 的终端按 `Ctrl + C` 停止服务器
2. 重新运行:
   ```bash
   cd F:\unia
   npm run dev:h5
   ```

**原因**: 重新编译所有模块

---

### 方案3: 清除Vite缓存

**操作**:
```bash
cd F:\unia
# 删除缓存目录
rm -rf node_modules/.vite
# 重启服务器
npm run dev:h5
```

**原因**: Vite缓存可能损坏

---

### 方案4: 修改pages.json触发重新编译

**操作**:
1. 打开 `F:\unia\src\pages.json`
2. 添加或删除一个空格
3. 保存文件
4. Vite会自动重新编译

---

### 方案5: 完全清理重装（最彻底）

**操作**:
```bash
cd F:\unia

# 停止服务器 (Ctrl + C)

# 清理缓存
rm -rf node_modules/.vite
rm -rf dist
rm -rf .temp

# 重新安装依赖
npm install

# 重启服务器
npm run dev:h5
```

---

## 🔍 验证修复

### 检查1: 查看控制台
打开浏览器开发者工具 (F12)，查看Console是否还有错误

### 检查2: 测试跳转
1. 点击首页"扫描设备"按钮
2. 应该能正常跳转到扫描页面
3. 没有错误提示

### 检查3: 查看Network
在开发者工具的Network标签中，查看是否成功加载 `scan.vue`

---

## 🐛 如果问题依然存在

### 检查点1: 端口号
确认访问的端口号是否正确：
- 错误: http://localhost:3000/
- 正确: http://localhost:3001/ (如果端口改变了)

### 检查点2: 路由路径
首页跳转代码应该是：
```javascript
uni.navigateTo({
  url: '/pages/bluetooth/scan'  // ✅ 正确
})
```

而不是：
```javascript
uni.navigateTo({
  url: '/src/pages/bluetooth/scan'  // ❌ 错误
})
```

### 检查点3: 文件完整性
确认文件存在且没有语法错误：
```bash
ls -la F:\unia\src\pages\bluetooth\scan.vue
```

---

## 📝 预防措施

### 1. 定期清理缓存
```bash
npm run dev:h5 前先执行
rm -rf node_modules/.vite
```

### 2. 使用正确的路径
UniApp页面路径不包含 `src/` 前缀

### 3. 热更新失败时
手动刷新浏览器而不是依赖热更新

---

## 🎯 快速命令

### 完整重启流程
```bash
# 1. 停止服务器 (Ctrl + C)

# 2. 清理缓存
cd F:\unia
rm -rf node_modules/.vite

# 3. 重启
npm run dev:h5

# 4. 浏览器强制刷新 (Ctrl + Shift + R)
```

---

**推荐操作**: 先尝试方案1（强制刷新），如果不行再试方案2（重启服务器）

---

*修复指南由协调者创建*
*最后更新: 2026-02-12*
